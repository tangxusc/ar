# 停止流水线流程

## 停止流水线
```graphql
mutation StopPipeline($taskId: String!) {
  stopPipeline(taskId: $taskId) {
    ...PipelineRunTask
  }
}
```

停止流水线时,调用graphql接口,传入流水线任务ID(taskId),接口返回停止结果(PipelineRunTask);
调用内存中golang context cancel函数,取消流水线执行计划dag图的执行;
获取当前正在执行节点,写入`pipeline.json`
正在运行的流水线node节点收到context cancel信号后,调用podman stop api 停止容器;
未运行的流水线节点状态设置为取消运行;
最后将流水线数据写入`/var/lib/ar/pipeline_name/时间戳_随机数/pipeline.json`文件中。

