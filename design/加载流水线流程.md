# 加载流水线流程

## 加载流水线

```
ar load -i 流水线.tar.gz(oci规范的镜像)
```
调用podman load api加载镜像,并调用podman run api运行一次性容器,
容器运行时,将宿主机`/var/lib/ar/pipelines/`目录挂载到容器`/pipelines/`目录下。
容器运行时,将宿主机`/var/lib/ar/镜像名/images/`目录挂载到容器`/images/`目录下。
流水线.tar.gz镜像内在运行时:
将镜像内的pipeline_name.template.json文件复制到容器`/pipelines/`目录下。
将镜像内的其他容器.tar.gz镜像复制到容器`/images/`目录下。
在流水线镜像执行完成后,调用podman load api 加载 宿主机`/var/lib/ar/镜像名/images/`目录 下的所有镜像,加载完成后清理目录

如果镜像加载失败,则返回错误。
如果容器运行失败(非0退出码),则返回错误。